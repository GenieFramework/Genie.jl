<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Using Genie with Docker · Genie - The Highly Productive Julia Web Framework</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Genie - The Highly Productive Julia Web Framework</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><span class="tocitem">Guides</span><ul><li><a class="tocitem" href="../guides/Working_With_Genie_Apps.html">Working with Genie Apps</a></li><li><a class="tocitem" href="../guides/Interactive_environment.html">Using Genie in an interactive environment</a></li><li><a class="tocitem" href="../guides/Simple_API_backend.html">Developing an API backend</a></li><li><a class="tocitem" href="../guides/Genie_Plugins.html">Using Genie Plugins</a></li><li><a class="tocitem" href="../guides/Working_With_Genie_Apps_Intermediary_Topics.html">Working With Genie Apps: Intermediate Topics [WIP]</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="1--Overview.html">Welcome to Genie</a></li><li><a class="tocitem" href="2--Installing_Genie.html">Installing Genie</a></li><li><a class="tocitem" href="3--Getting_Started.html">Getting started</a></li><li><a class="tocitem" href="4--Developing_Web_Services.html">Creating a web service</a></li><li><a class="tocitem" href="4-1--Developing_MVC_Web_Apps.html">Developing MVC web applications</a></li><li><a class="tocitem" href="5--Handling_Query_Params.html">Handling URI/query params</a></li><li><a class="tocitem" href="6--Working_with_POST_Payloads.html">Working with forms and POST payloads</a></li><li><a class="tocitem" href="7--Using_JSON_Payloads.html">Using JSON payloads</a></li><li><a class="tocitem" href="8--Handling_File_Uploads.html">Uploading files</a></li><li><a class="tocitem" href="9--Publishing_Your_Julia_Code_Online_With_Genie_Apps.html">Adding your libraries into Genie</a></li><li><a class="tocitem" href="10--Loading_Genie_Apps.html">Loading and starting Genie apps</a></li><li><a class="tocitem" href="11--Managing_External_Packages.html">Managing Genie app&#39;s dependencies</a></li><li><a class="tocitem" href="12--Advanced_Routing_Techniques.html">Advanced routing</a></li><li><a class="tocitem" href="13--Initializers.html">Auto-loading configuration code with initializers</a></li><li><a class="tocitem" href="14--The_Secrets_File.html">The secrets file</a></li><li><a class="tocitem" href="15--The_Lib_Folder.html">Auto-loading user libraries</a></li><li class="is-active"><a class="tocitem" href="16--Using_Genie_With_Docker.html">Using Genie with Docker</a><ul class="internal"><li><a class="tocitem" href="#Generating-the-Genie-optimised-Dockerfile"><span>Generating the Genie-optimised <code>Dockerfile</code></span></a></li><li><a class="tocitem" href="#Building-the-Docker-container"><span>Building the Docker container</span></a></li><li><a class="tocitem" href="#Running-the-Genie-app-within-the-Docker-container"><span>Running the Genie app within the Docker container</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li></ul></li><li><a class="tocitem" href="17--Working_with_Web_Sockets.html">Working with WebSockets</a></li><li><a class="tocitem" href="80--Force_Compiling_Routes.html">Force compiling route handlers</a></li><li><a class="tocitem" href="90--Deploying_With_Heroku_Buildpacks.html">Deploying to Heroku with Buildpacks</a></li><li><a class="tocitem" href="91--Deploying_Genie_Docker_Apps_on_Heroku.html">Deploying to Heroku with Docker</a></li><li><a class="tocitem" href="92--Deploying_Genie_Server_Apps_with_Nginx.html">Deploying to server with Nginx</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../API/app.html">App</a></li><li><a class="tocitem" href="../API/appserver.html">AppServer</a></li><li><a class="tocitem" href="../API/assets.html">Assets</a></li><li><a class="tocitem" href="../API/cache.html">Cache</a></li><li><a class="tocitem" href="../API/commands.html">Commands</a></li><li><a class="tocitem" href="../API/configuration.html">Configuration</a></li><li><a class="tocitem" href="../API/cookies.html">Cookies</a></li><li><input class="collapse-toggle" id="menuitem-4-8" type="checkbox"/><label class="tocitem" for="menuitem-4-8"><span class="docs-label">Deploy</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../API/deploy_docker.html">Docker</a></li><li><a class="tocitem" href="../API/deploy_heroku.html">Heroku</a></li></ul></li><li><a class="tocitem" href="../API/encryption.html">Encryption</a></li><li><a class="tocitem" href="../API/exceptions.html">Exceptions</a></li><li><a class="tocitem" href="../API/filetemplates.html">FileTemplates</a></li><li><a class="tocitem" href="../API/flash.html">Flash</a></li><li><a class="tocitem" href="../API/generator.html">Generator</a></li><li><a class="tocitem" href="../API/genie.html">Genie</a></li><li><a class="tocitem" href="../API/headers.html">Headers</a></li><li><a class="tocitem" href="../API/httputils.html">HttpUtils</a></li><li><a class="tocitem" href="../API/input.html">Input</a></li><li><a class="tocitem" href="../API/plugins.html">Plugins</a></li><li><a class="tocitem" href="../API/renderer.html">Renderer</a></li><li><a class="tocitem" href="../API/renderer_html.html">HTML Renderer</a></li><li><a class="tocitem" href="../API/renderer_js.html">JS Renderer</a></li><li><a class="tocitem" href="../API/renderer_json.html">JSON Renderer</a></li><li><a class="tocitem" href="../API/requests.html">Requests</a></li><li><a class="tocitem" href="../API/responses.html">Responses</a></li><li><a class="tocitem" href="../API/router.html">Router</a></li><li><a class="tocitem" href="../API/sessions.html">Sessions</a></li><li><a class="tocitem" href="../API/toolbox.html">Toolbox</a></li><li><a class="tocitem" href="../API/util.html">Util</a></li><li><a class="tocitem" href="../API/webchannels.html">WebChannels</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href="16--Using_Genie_With_Docker.html">Using Genie with Docker</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="16--Using_Genie_With_Docker.html">Using Genie with Docker</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenieFramework/Genie.jl/blob/master/docs/src/tutorials/16--Using_Genie_With_Docker.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Using-Genie-with-Docker"><a class="docs-heading-anchor" href="#Using-Genie-with-Docker">Using Genie with Docker</a><a id="Using-Genie-with-Docker-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Genie-with-Docker" title="Permalink"></a></h1><p>Genie comes with built-in support for containerizing apps. The functionality is available in the <code>Genie.Deploy.Docker</code> module.</p><h2 id="Generating-the-Genie-optimised-Dockerfile"><a class="docs-heading-anchor" href="#Generating-the-Genie-optimised-Dockerfile">Generating the Genie-optimised <code>Dockerfile</code></a><a id="Generating-the-Genie-optimised-Dockerfile-1"></a><a class="docs-heading-anchor-permalink" href="#Generating-the-Genie-optimised-Dockerfile" title="Permalink"></a></h2><p>You can bootstrap the Docker setup by invoking the <code>Genie.Deploy.Docker.dockerfile()</code> function. This will generate a custom <code>Dockerfile</code> optimized for Genie web apps containerization. The file will be generated in the current work dir (or where instructed by the optional argument <code>path</code> – see the help for the <code>dockerfile()</code> function). Once generated, you can edit it and customize it as needed - Genie will not overwrite the file, thus preserving any changes.</p><p>The behaviour of <code>dockerfile()</code> can be controlled by passing any of the multiple optional arguments supported.</p><h2 id="Building-the-Docker-container"><a class="docs-heading-anchor" href="#Building-the-Docker-container">Building the Docker container</a><a id="Building-the-Docker-container-1"></a><a class="docs-heading-anchor-permalink" href="#Building-the-Docker-container" title="Permalink"></a></h2><p>Once we have our <code>Dockerfile</code> ready, we can invoke <code>Genie.Deploy.Docker.build()</code> in order to build the Docker container. You can optionally pass the container&#39;s name (by default <code>&quot;genie&quot;</code>) and the path (defaults to current work dir).</p><h2 id="Running-the-Genie-app-within-the-Docker-container"><a class="docs-heading-anchor" href="#Running-the-Genie-app-within-the-Docker-container">Running the Genie app within the Docker container</a><a id="Running-the-Genie-app-within-the-Docker-container-1"></a><a class="docs-heading-anchor-permalink" href="#Running-the-Genie-app-within-the-Docker-container" title="Permalink"></a></h2><p>When the image is ready, we can run it with <code>Genie.Deploy.Docker.run()</code>. We can configure any of the optional arguments in order to control how the app is run. Check the inline help for the function for more details.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>First let&#39;s create a Genie app:</p><pre><code class="language-julia hljs">julia&gt; using Genie

julia&gt; Genie.newapp(&quot;DockerTest&quot;)
[ Info: Done! New app created at /Users/adrian/DockerTest
# output truncated</code></pre><p>When it&#39;s ready, let&#39;s add the <code>Dockerfile</code>:</p><pre><code class="language-julia hljs">julia&gt; using Genie.Deploy

julia&gt; Deploy.Docker.dockerfile()
Docker file successfully written at /Users/adrian/DockerTest/Dockerfile</code></pre><p>Now, to build our container:</p><pre><code class="language-julia hljs">julia&gt; Deploy.Docker.build()
Sending build context to Docker daemon  1.056MB
Step 1/18 : FROM julia:latest
 ---&gt; f4c9686d85da
# output truncated
Successfully tagged genie:latest
Docker container successfully built</code></pre><p>And finally, we can now run our app within the Docker container:</p><pre><code class="language-julia hljs">julia&gt; Deploy.Docker.run()
Starting docker container with `docker run -it --rm -p 80:8000 --name genieapp genie bin/server`

 _____         _
|   __|___ ___|_|___
|  |  | -_|   | | -_|
|_____|___|_|_|_|___|

| Web: https://genieframework.com
| GitHub: https://github.com/genieframework/Genie.jl
| Docs: https://genieframework.github.io/Genie.jl
| Gitter: https://gitter.im/essenciary/Genie.jl
| Twitter: https://twitter.com/GenieMVC

Genie v0.19.0
Active env: DEV

Web Server starting at http://127.0.0.1:8000</code></pre><p>Our application starts inside the Docker container, binding port 8000 within the container (where the Genie app is running) to the port 80 of the host. So we are now able to access our app at <code>http://localhost</code>. If you navigate to <code>http://localhost</code> with your favourite browser you&#39;ll see Genie&#39;s welcome page. Notice that we don&#39;t access on port 8000 - this page is served from the Docker container on the default port 80.</p><h3 id="Using-Docker-during-development"><a class="docs-heading-anchor" href="#Using-Docker-during-development">Using Docker during development</a><a id="Using-Docker-during-development-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Docker-during-development" title="Permalink"></a></h3><p>If we want to use Docker to serve the app during development, we need to <em>mount</em> our app from host (your computer) into the container – so that we can keep editing our files locally, but see the changes reflected in the Docker container. In order to do this we need to pass the <code>mountapp = true</code> argument to <code>Deploy.Docker.run()</code>, like this:</p><pre><code class="language-julia hljs">julia&gt; Deploy.Docker.run(mountapp = true)
Starting docker container with `docker run -it --rm -p 80:8000 --name genieapp -v /Users/adrian/DockerTest:/home/genie/app genie bin/server`</code></pre><p>When the app finishes starting, we can edit the files on the host using our favourite IDE, and see the changes reflected in the Docker container.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="15--The_Lib_Folder.html">« Auto-loading user libraries</a><a class="docs-footer-nextpage" href="17--Working_with_Web_Sockets.html">Working with WebSockets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Monday 31 January 2022 11:47">Monday 31 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
